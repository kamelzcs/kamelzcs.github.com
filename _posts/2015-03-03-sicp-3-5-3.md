---
layout: post
title: sicp-3-5-3
date: 2015-03-03 13:24:29
isOriginal: true
category: SICP
tags:
 - Lisp
keywords: 
description: 
---

#### 3.63

`guess` is used to share the computation result between the succssive calling.
Otherwise each call to `sqrt-stream x` would require recursively calling.

If `memo-proc` is not used, these two versions would be the same efficiency.

#### 3.64

{%highlight scheme%}
(define (stream-limit s tolerance)
  (let ((s2 (stream-cdr s)))
    (if (< (abs
             (-
               (stream-car s)
               (stream-car s2)))
           tolerance)
      (stream-car s2)
      (stream-limit s2 tolerance))))
{%endhighlight%}

#### 3.65

{%highlight scheme%}
(define (euler-transform s)
  (let ((s0 (stream-ref s 0))           ; Sn-1
        (s1 (stream-ref s 1))           ; Sn
        (s2 (stream-ref s 2)))          ; Sn+1
    (cons-stream (- s2 (/ (square (- s2 s1))
                          (+ s0 (* -2 s1) s2)))
                 (euler-transform (stream-cdr s)))))

(define (make-tableau transform s)
  (cons-stream s
               (make-tableau transform
                             (transform s))))
(define (accelerated-sequence transform s)
  (stream-map stream-car
              (make-tableau transform s)))
(define (log2-summands n)
  (cons-stream (/ 1.0 n)
               (stream-map - (log2-summands (+ n 1)))))
(define log2-stream
  (partial-sums (log2-summands 1)))

(stream-limit
  (accelerated-sequence euler-transform log2-stream) 0.0001)
{%endhighlight%}
