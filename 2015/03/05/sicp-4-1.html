<!DOCTYPE html>
<html>
<head>
	
	<title>sicp-4-1 - kamelzcs's library</title>
	
	
	<meta name="author" content="kamelzcs" />
	
	<meta name="description" content="kamelzcs's library sicp-4-1" />
	

	

	<meta name="robots" content="noodp, nydir" />
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	
	<link href="/css/blueprint/screen.css" type="text/css" rel="stylesheet" />
	<!--[if lt IE 8]> <link href="/css/blueprint/ie.css" type="text/css" rel="stylesheet" /> <![endif]-->	 
	<link href="/css/railscasts.css" type="text/css" rel="stylesheet" />
	<link href="/css/site.css" type="text/css" rel="stylesheet" />

	<script type="text/javascript" src="/js/writeCapture-1.0.5-nolib-min.js"></script>
		<script type="text/javascript" src="/js/jquery.js"></script>
	<script type="text/javascript" src="/js/site.js"></script>
	<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-45986644-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>

	<script src="https://www.google.com/jsapi" type="text/javascript"></script>
  <script language="Javascript" type="text/javascript">
  //<![CDATA[
google.load("search", "1");

function OnLoad() {
	// Create a search control
	var searchControl = new google.search.SearchControl();
	
	// Add in a WebSearch
	var webSearch = new google.search.WebSearch();
	
	// Restrict our search to pages from this site
	webSearch.setSiteRestriction('kamelzcs.github.com');
	
	// Add the searcher to the SearchControl
	searchControl.addSearcher(webSearch);
	
	// tell the searcher to draw itself and tell it where to attach
	searchControl.draw(document.getElementById("searchcontrol"));
	// Add the value of "Search..." to the input field and a class of .empty
}

google.setOnLoadCallback(function() {
  $(function() {
	OnLoad()
	$(".gsc-input > input").val("Search... powered by Google").addClass("empty");
	 
	// When you click on #search
	$(".gsc-input > input").focus(function(){
	 
		// If the value is equal to "Search..."
		if($(this).val() == "Search... powered by Google") {
			// remove all the text and the class of .empty
			$(this).val("").removeClass("empty");;
		}
		this.select();
	});
	 
	// When the focus on #search is lost
	$(".gsc-input > input").blur(function(){
	 
		// If the input field is empty
		if($(this).val() == "") {
			// Add the text "Search..." and a class of .empty
			$(this).val("Search... powered by Google").addClass("empty");
		}
	});

	$("#comment_heading").click(function()
	{
		$(this).next("#disqus_thread").slideToggle(500);
		if($(this).text() == "Show Comments") {
			$(this).text("Hide Comments")
		}else{
			$(this).text("Show Comments")
		}
	});
		
  });
});


  //]]>
  </script>


	<!-- mathjax config similar to math.stackexchange -->
	<script type="text/x-mathjax-config">
	MathJax.Hub.Config({
	  jax: ["input/TeX", "output/HTML-CSS"],
	  tex2jax: {
		inlineMath: [ ['$', '$'] ],
		displayMath: [ ['$$', '$$']],
		processEscapes: true,
		skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
	  },
	  messageStyle: "none",
	  "HTML-CSS": {
		  preferredFont: "TeX",
		  availableFonts: ["STIX","TeX"],
		  }
	});
	</script>
	<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
	<!-- mathjax css conflict with pygments -->
	<style>
	.MathJax .mo,
	.MathJax .mi {
	  color: inherit;
	</style>

</head>

<body>
	<div class="container">
	<!-- <div class="container showgrid"> -->
		<div id="header" class="span-24">
  <div id="menu" class="span-15 last">
    <ul>
      <li class="first"><a href="/">Home</a></li>
      <li><a href="/about">About</a></li>
      <li><a href="/blog">Blog</a></li>
      <li><a href="/archives">Archives</a></li>
      <li><a href="/projects">Projects</a></li>
      <!--<li class="last"><a id="mail" href="mailto:kamelzcs@gmail.com">Contact</a></li>-->
    </ul>
  </div>
</div>

		
		<div id="main" class="span-17">
			<style type="text/css">
h3,h4{ 
	color: #335E8D;
}			
h3,h4 {
	margin-left		: 3px;
	font-variant	: small-caps;
	font-weight		: normal;
	border-bottom : 1px dotted #ccc;	
}
</style>




<div class="post" id="main-content">
	<h1>sicp-4-1</h1>
	<h4 class="large-bottom">
		Posted on 2015-03-05 15:51:11 +0000
		 in <a href="/categories/SICP">SICP</a> 

		<span class="tag-list">
			
			<a href="/tags/Lisp">Lisp</a>
			
		</span>
	</h4>
	
	<div class="content">
		<h4 id="41">4.1</h4>

<p>It takes me several minutes to really understand the quanstion. :(</p>

<p>It really only has something to do with the order of the parameter evaluation.
To restrict the order, the parameters passed in to <code class="highlighter-rouge">cons</code> should be taken out
explicitly before being used.</p>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">list-of-values-left-right</span> <span class="nv">exps</span> <span class="nv">env</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">no-operands</span> <span class="nv">exps</span><span class="p">)</span>
    <span class="o">'</span><span class="p">()</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">left</span> <span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nf">first-operand</span> <span class="nv">exps</span><span class="p">)</span> <span class="nv">env</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">cons</span> <span class="nv">left</span>
            <span class="p">(</span><span class="nf">list-of-values-left-right</span> <span class="p">(</span><span class="nf">rest-operands</span> <span class="nv">exps</span><span class="p">)</span> <span class="nv">env</span><span class="p">)))))</span></code></pre></figure>

<h4 id="42">4.2</h4>

<blockquote>
  <p>A procedure application is any compound expression that is not one of the above expression types. The car of the expression is the operator, and the cdr is the list of operands</p>
</blockquote>

<p>The problem lies in the way to determain a procedure which is much too simple.</p>

<p>If it is put at the very beginning, then <code class="highlighter-rouge">(define x 3)</code> would be recognized as a procedure, the operator of which is
<code class="highlighter-rouge">define</code> and the operands are <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">3</code>. But at that time, there is no procedure called <code class="highlighter-rouge">define</code> at all.</p>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">application?</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">exp</span> <span class="ss">'call</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">operator</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">exp</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">operands</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nb">cddr</span> <span class="nv">exp</span><span class="p">))</span></code></pre></figure>

<h4 id="44">4.4</h4>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"><span class="p">((</span><span class="nf">and?</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nf">eval-and</span> <span class="nv">exp</span> <span class="nv">env</span><span class="p">))</span>
<span class="p">((</span><span class="nf">or?</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nf">eval-or</span> <span class="nv">exp</span> <span class="nv">env</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">and?</span> <span class="nv">exp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">exp</span> <span class="ss">'and</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">eval-and</span> <span class="nv">exp</span> <span class="nv">env</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">eval-and-operands</span> <span class="nv">operands</span><span class="p">)</span>
    <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">null?</span> <span class="nv">operands</span><span class="p">)</span> <span class="nv">false</span><span class="p">)</span>
          <span class="p">((</span><span class="nf">true?</span> <span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">operands</span><span class="p">)</span> <span class="nv">env</span><span class="p">))</span>
           <span class="p">(</span><span class="nf">eval-and-operands</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">operands</span><span class="p">)))</span>
          <span class="p">(</span><span class="k">else</span> <span class="nv">false</span><span class="p">)))</span>
  <span class="p">(</span><span class="nf">eval-and-operands</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">exp</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">or?</span> <span class="nv">exp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">exp</span> <span class="ss">'or</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">eval-or</span> <span class="nv">exp</span> <span class="nv">env</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">eval-or-operands</span> <span class="nv">operands</span><span class="p">)</span>
    <span class="p">(</span><span class="k">cond</span> <span class="p">((</span><span class="nb">null?</span> <span class="nv">operands</span><span class="p">)</span> <span class="nv">false</span><span class="p">)</span>
          <span class="p">((</span><span class="nf">true?</span> <span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">operands</span><span class="p">)</span> <span class="nv">env</span><span class="p">))</span>
           <span class="nv">true</span><span class="p">)</span>
          <span class="p">(</span><span class="k">else</span>
           <span class="p">(</span><span class="nf">eval-or-operands</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">operands</span><span class="p">)))))</span>
  <span class="p">(</span><span class="nf">eval-or-operands</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">exp</span><span class="p">)))</span>

<span class="c1">;derived version</span>
<span class="p">((</span><span class="nf">and?</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nf">and-&gt;if</span> <span class="nv">exp</span><span class="p">)</span> <span class="nv">env</span><span class="p">))</span>
<span class="p">((</span><span class="nf">or?</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nb">eval</span> <span class="p">(</span><span class="nf">or-&gt;if</span> <span class="nv">exp</span><span class="p">)</span> <span class="nv">env</span><span class="p">))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">and?</span> <span class="nv">exp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">exp</span> <span class="ss">'and</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">and-clauses</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">exp</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">expand-and-clauses</span> <span class="nv">clauses</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">clauses</span><span class="p">)</span>
      <span class="ss">'true</span>
      <span class="p">(</span><span class="nf">make-if</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">clauses</span><span class="p">)</span>
               <span class="p">(</span><span class="nf">expand-and-clauses</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">clauses</span><span class="p">))</span>
               <span class="ss">'false</span><span class="p">)))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">and-&gt;if</span> <span class="nv">exp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">expand-and-clauses</span> <span class="p">(</span><span class="nf">and-clauses</span> <span class="nv">exp</span><span class="p">)))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">or?</span> <span class="nv">exp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">exp</span> <span class="ss">'or</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">or-clauses</span> <span class="nv">exp</span><span class="p">)</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">exp</span><span class="p">))</span>
<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">expand-or-clauses</span> <span class="nv">clauses</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">clauses</span><span class="p">)</span>
      <span class="ss">'false</span>
      <span class="p">(</span><span class="nf">make-if</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">clauses</span><span class="p">)</span>
               <span class="ss">'true</span>
               <span class="p">(</span><span class="nf">expand-or-clauses</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">clauses</span><span class="p">)))))</span>

<span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">or-&gt;if</span> <span class="nv">exp</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">expand-or-clauses</span> <span class="p">(</span><span class="nf">or-clauses</span> <span class="nv">exp</span><span class="p">)))</span></code></pre></figure>

<p>The tricky thing is the type of the return value.
For <code class="highlighter-rouge">derived</code> expression, the returned type is some data,
while for other kinds, it would return some code.</p>

<h4 id="45">4.5</h4>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">expand-clauses</span> <span class="nv">clauses</span><span class="p">)</span>
  <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">clauses</span><span class="p">)</span>
    <span class="ss">'false</span>                          <span class="c1">; no else clause</span>
    <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">first</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">clauses</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">rest</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">clauses</span><span class="p">)))</span>
      <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">cond-else-clause?</span> <span class="nv">first</span><span class="p">)</span>
        <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">rest</span><span class="p">)</span>
          <span class="p">(</span><span class="nf">sequence-&gt;exp</span> <span class="p">(</span><span class="nf">cond-actions</span> <span class="nv">first</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">error</span> <span class="s">"ELSE clause isn't last -- COND-&gt;IF"</span> <span class="nv">clauses</span><span class="p">))</span>
        <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">test</span> <span class="p">(</span><span class="nf">cond-predicate</span> <span class="nv">first</span><span class="p">))</span>
              <span class="p">(</span><span class="nf">recepient</span> <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">eq?</span> <span class="p">(</span><span class="nb">car</span> <span class="p">(</span><span class="nf">cond-actions</span> <span class="nv">first</span><span class="p">))</span> <span class="ss">'=&gt;</span><span class="p">)</span>
                           <span class="p">(</span><span class="nb">cadr</span> <span class="p">(</span><span class="nf">cond-actions</span> <span class="nv">first</span><span class="p">))</span>
                           <span class="nv">false</span><span class="p">)))</span>
          <span class="p">(</span><span class="nf">make-if</span> <span class="nv">test</span>
                  <span class="p">(</span><span class="k">if</span> <span class="nv">recepient</span>
                    <span class="p">(</span><span class="nb">list</span> <span class="nv">recepient</span> <span class="nv">test</span><span class="p">)</span> <span class="c1">;test-recepient cond</span>
                    <span class="p">(</span><span class="nf">sequence-&gt;exp</span> <span class="p">(</span><span class="nf">cond-actions</span> <span class="nv">first</span><span class="p">)))</span> <span class="c1">;normal cond</span>
                  <span class="p">(</span><span class="nf">expand-clauses</span> <span class="nv">rest</span><span class="p">)))))))</span></code></pre></figure>

<h4 id="46">4.6</h4>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"> <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let?</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">expr</span> <span class="ss">'let</span><span class="p">))</span>
 <span class="p">(</span><span class="k">define</span> <span class="nv">let-associations</span> <span class="nv">cadr</span><span class="p">)</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let-vars</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nb">map</span> <span class="nv">car</span> <span class="p">(</span><span class="nf">let-associations</span> <span class="nv">expr</span><span class="p">)))</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let-value</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nb">map</span> <span class="nv">cadr</span> <span class="p">(</span><span class="nf">let-associations</span> <span class="nv">expr</span><span class="p">)))</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let-body</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nb">cddr</span> <span class="nv">expr</span><span class="p">))</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let-&gt;combination</span> <span class="nv">expr</span><span class="p">)</span>
   <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nf">make-lambda</span> <span class="p">(</span><span class="nf">let-vars</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nf">let-body</span> <span class="nv">expr</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">let-value</span> <span class="nv">expr</span><span class="p">)))</span></code></pre></figure>

<h4 id="47">4.7</h4>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"> <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let*?</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nf">tagged-list?</span> <span class="nv">expr</span> <span class="ss">'let*</span><span class="p">))</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let*-body</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nb">caddr</span> <span class="nv">expr</span><span class="p">))</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let*-inits</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nb">cadr</span> <span class="nv">expr</span><span class="p">))</span>
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let*-&gt;nested-lets</span> <span class="nv">expr</span><span class="p">)</span>
   <span class="p">(</span><span class="k">let</span> <span class="p">((</span><span class="nf">inits</span> <span class="p">(</span><span class="nf">let*-inits</span> <span class="nv">expr</span><span class="p">))</span>
         <span class="p">(</span><span class="nf">body</span> <span class="p">(</span><span class="nf">let*-body</span> <span class="nv">expr</span><span class="p">)))</span>
     <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">make-lets</span> <span class="nv">exprs</span><span class="p">)</span>
       <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">null?</span> <span class="nv">exprs</span><span class="p">)</span>
         <span class="nv">body</span>
         <span class="p">(</span><span class="nb">list</span> <span class="ss">'let</span> <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">car</span> <span class="nv">exprs</span><span class="p">))</span> <span class="p">(</span><span class="nf">make-lets</span> <span class="p">(</span><span class="nb">cdr</span> <span class="nv">exprs</span><span class="p">)))))</span>
     <span class="p">(</span><span class="nf">make-lets</span> <span class="nv">inits</span><span class="p">)))</span></code></pre></figure>

<h4 id="48">4.8</h4>

<p>It should be transformed like this.</p>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">fib</span> <span class="nv">n</span><span class="p">)</span>
  <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">fib-iter</span> <span class="nv">a</span> <span class="nv">b</span> <span class="nv">count</span><span class="p">)</span>
    <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nb">=</span> <span class="nv">count</span> <span class="mi">0</span><span class="p">)</span>
      <span class="nv">b</span>
      <span class="p">(</span><span class="nf">fib-iter</span> <span class="p">(</span><span class="nb">+</span> <span class="nv">a</span> <span class="nv">b</span><span class="p">)</span> <span class="nv">a</span> <span class="p">(</span><span class="nb">-</span> <span class="nv">count</span> <span class="mi">1</span><span class="p">))))</span>
  <span class="p">(</span><span class="nf">fib-iter</span> <span class="mi">1</span> <span class="mi">0</span> <span class="nv">n</span><span class="p">))</span></code></pre></figure>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"> <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">named-let-&gt;func</span> <span class="nv">expr</span><span class="p">)</span> 
     <span class="p">(</span><span class="nb">list</span> <span class="ss">'define</span>  
           <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nf">named-let-func-name</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nf">named-let-func-parameters</span> <span class="nv">expr</span><span class="p">))</span> 
           <span class="p">(</span><span class="nf">named-let-func-body</span> <span class="nv">expr</span><span class="p">)))</span> 
  
 <span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">let-&gt;combination</span> <span class="nv">expr</span><span class="p">)</span> 
     <span class="p">(</span><span class="k">if</span> <span class="p">(</span><span class="nf">named-let?</span> <span class="nv">expr</span><span class="p">)</span> 
         <span class="p">(</span><span class="nf">sequence-&gt;exp</span> 
           <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">named-let-&gt;func</span> <span class="nv">expr</span><span class="p">)</span> 
                 <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nf">named-let-func-name</span> <span class="nv">expr</span><span class="p">)</span> <span class="p">(</span><span class="nf">named-let-func-inits</span> <span class="nv">expr</span><span class="p">))))</span> 
         <span class="p">(</span><span class="nb">cons</span> <span class="p">(</span><span class="nf">make-lambda</span> <span class="p">(</span><span class="nf">let-vars</span> <span class="nv">expr</span><span class="p">)</span> 
               <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">let-body</span> <span class="nv">expr</span><span class="p">)))</span> 
               <span class="p">(</span><span class="nf">let-inits</span> <span class="nv">expr</span><span class="p">))))</span> </code></pre></figure>

<h4 id="49">4.9</h4>

<figure class="highlight"><pre><code class="language-scheme" data-lang="scheme"><span class="p">(</span><span class="k">define</span> <span class="p">(</span><span class="nf">while-&gt;combination</span> <span class="nv">expr</span><span class="p">)</span>
  <span class="p">(</span><span class="nf">sequence-&gt;exp</span>
    <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nb">list</span> <span class="ss">'define</span>
                <span class="p">(</span><span class="nb">list</span> <span class="ss">'while-iter</span><span class="p">)</span>
                <span class="p">(</span><span class="nf">make-if</span> <span class="p">(</span><span class="nf">while-condition</span> <span class="nv">expr</span><span class="p">)</span>
                         <span class="p">(</span><span class="nf">sequence-&gt;exp</span> <span class="p">(</span><span class="nb">list</span> <span class="p">(</span><span class="nf">while-body</span> <span class="nv">expr</span><span class="p">)</span>
                                              <span class="p">(</span><span class="nb">list</span> <span class="ss">'while-iter</span><span class="p">)))</span>
                         <span class="ss">'true</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">list</span> <span class="ss">'while-iter</span><span class="p">))))</span></code></pre></figure>


	</div>
	
	<div class="next-prev-nav low-top">
		
		-----------------------------------
		<b>本文内容遵从<a title="Content licenced under Creative Commons by-nc-sa 3.0" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh">CC版权协议</a>转载请注明出自<a href="http://kamelzcs.github.com">kamelzcs</a></b>
		-----------------------------------
		<hr/>
		
		
		
			&laquo;&nbsp;<a href="/2015/03/06/sicp-4-1-3-4-1-5" rel="next" title="sicp-4-1-3-4-1-5">sicp-4-1-3-4-1-5</a>
		
	
		
			
				|
			
		
		
	
		
			<a href="/2015/03/04/sicp-3-5-4-3-5-5" rel="previous" title="sicp-3-5-4-3-5-5">sicp-3-5-4-3-5-5</a>&nbsp;&raquo;
		
	
		<br />
	</div>

	<hr />
	<!--<div class="sharing">
	
	 
	
	
	
	
	
	
	 
</div>
 -->
	

<script type="text/javascript">
      var disqus_shortname = 'kamelzcs';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>


	<div>
		<h2 id='comment_heading'>Hide Comments</h2>
		<div id="disqus_thread" aria-live="polite"><div id="disqus_thread"></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'kamelzcs'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
	</div>
</div>

		</div>
		
		
			<div id="sidebar" class="span-6 push-1 last">
	<div class="sidebar-module" id='gsearcher'>
				 
		<div id="searchcontrol">
			
		</div>
		
	</div>

	<div class="sidebar-module">
		<div class="title"><a href='/tags'>Tags</a></div>
		
            <span style="font-size: 95%">
              <a href="/tags/app-engine/" title="5 posts">App Engine</a>
            </span>
          
            <span style="font-size: 80%">
              <a href="/tags/bash/" title="2 posts">Bash</a>
            </span>
          
            <span style="font-size: 80%">
              <a href="/tags/c++/" title="2 posts">C++</a>
            </span>
          
            <span style="font-size: 125%">
              <a href="/tags/cis194/" title="11 posts">CIS194</a>
            </span>
          
            <span style="font-size: 95%">
              <a href="/tags/database/" title="5 posts">Database</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/datastructure/" title="1 post">Datastructure</a>
            </span>
          
            <span style="font-size: 85%">
              <a href="/tags/git/" title="3 posts">Git</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/github/" title="1 post">Github</a>
            </span>
          
            <span style="font-size: 130%">
              <a href="/tags/haskell/" title="12 posts">Haskell</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/ipsc/" title="1 post">IPSC</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/java/" title="1 post">Java</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/jekyll/" title="1 post">Jekyll</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/jinja2/" title="1 post">Jinja2</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/life/" title="1 post">Life</a>
            </span>
          
            <span style="font-size: 280%">
              <a href="/tags/lisp/" title="42 posts">Lisp</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/polymorphism/" title="1 post">Polymorphism</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/python/" title="1 post">Python</a>
            </span>
          
            <span style="font-size: 80%">
              <a href="/tags/review/" title="2 posts">Review</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/solarized/" title="1 post">Solarized</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/sourcecode/" title="1 post">Sourcecode</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/template/" title="1 post">Template</a>
            </span>
          
            <span style="font-size: 80%">
              <a href="/tags/topcoder/" title="2 posts">Topcoder</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/variable-scope/" title="1 post">Variable scope</a>
            </span>
          
            <span style="font-size: 80%">
              <a href="/tags/vim/" title="2 posts">Vim</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/life/" title="1 post">life</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/亲情/" title="1 post">亲情</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/回忆/" title="1 post">回忆</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/大规模机器学习/" title="1 post">大规模机器学习</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/展望/" title="1 post">展望</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/日本/" title="1 post">日本</a>
            </span>
          
            <span style="font-size: 80%">
              <a href="/tags/生活/" title="2 posts">生活</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/诗歌/" title="1 post">诗歌</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/诗词/" title="1 post">诗词</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/语音/" title="1 post">语音</a>
            </span>
          
            <span style="font-size: 75%">
              <a href="/tags/趋势/" title="1 post">趋势</a>
            </span>
          
	</div>

	<div class="sidebar-module">
		<div class="title"><a href='/categories'>Categories</a></div>
		<a href="/categories/jekyll"><strong>jekyll</strong></a> (1)<br /><a href="/categories/生活"><strong>生活</strong></a> (4)<br /><a href="/categories/语音"><strong>语音</strong></a> (1)<br /><a href="/categories/讲座"><strong>讲座</strong></a> (1)<br /><a href="/categories/technique"><strong>Technique</strong></a> (5)<br /><a href="/categories/technique"><strong>technique</strong></a> (1)<br /><a href="/categories/technology"><strong>Technology</strong></a> (4)<br /><a href="/categories/vim"><strong>Vim</strong></a> (1)<br /><a href="/categories/诗词"><strong>诗词</strong></a> (1)<br /><a href="/categories/life"><strong>Life</strong></a> (2)<br /><a href="/categories/computer"><strong>Computer</strong></a> (1)<br /><a href="/categories/linux"><strong>Linux</strong></a> (1)<br /><a href="/categories/data-structure"><strong>Data structure</strong></a> (1)<br /><a href="/categories/life"><strong>life</strong></a> (1)<br /><a href="/categories/sicp"><strong>SICP</strong></a> (42)<br /><a href="/categories/cc++"><strong>C/C++</strong></a> (1)<br /><a href="/categories/contest"><strong>Contest</strong></a> (2)<br /><a href="/categories/programming"><strong>Programming</strong></a> (1)<br /><a href="/categories/algorithm"><strong>Algorithm</strong></a> (1)<br /><a href="/categories/functional-programming"><strong>Functional Programming</strong></a> (12)<br />
	</div>
	
	<div class="sidebar-module">
		<div class="title"><a href='/archives'>Archives</a></div>
		<a href="/2015/08"><strong>August 2015</strong></a> (12)<br /><a href="/2015/07"><strong>July 2015</strong></a> (2)<br /><a href="/2015/06"><strong>June 2015</strong></a> (2)<br /><a href="/2015/05"><strong>May 2015</strong></a> (1)<br /><a href="/2015/03"><strong>March 2015</strong></a> (13)<br /><a href="/2015/02"><strong>February 2015</strong></a> (30)<br /><a href="/2014/02"><strong>February 2014</strong></a> (1)<br /><a href="/2014/01"><strong>January 2014</strong></a> (4)<br /><a href="/2013/12"><strong>December 2013</strong></a> (2)<br /><a href="/2013/11"><strong>November 2013</strong></a> (8)<br /><a href="/2013/10"><strong>October 2013</strong></a> (2)<br /><a href="/2013/03"><strong>March 2013</strong></a> (3)<br /><a href="/2013/02"><strong>February 2013</strong></a> (2)<br /><a href="/2013/01"><strong>January 2013</strong></a> (1)<br /><a href="/2012/12"><strong>December 2012</strong></a> (1)<br />
	</div>
</div>

		
		
		<div id="footer" class="span-24"> 
<span  title="Content licenced under Creative Commons by-nc-sa 3.0">版权所有<a title="Content licenced under Creative Commons by-nc-sa 3.0" href="http://creativecommons.org/licenses/by-nc-sa/3.0/deed.zh">&copy;</a> 
	2012-2017 kamelzcs。
</span> 
&nbsp;&nbsp;&nbsp;&nbsp; <a href="https://github.com/kamelzcs">GitHub</a>
&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://weibo.com/u/2534942150">新浪微博</a>
 &nbsp;&nbsp;&nbsp;&nbsp; <a href="http://twitter.com/kamelzcs">Twitter</a>
&nbsp;&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;&nbsp;
<span>
    主题由<a title="site's theme made by Bilal Hussain" href="http://bilalh.github.com">Bilal Hussain Hussain</a>提供,由<a href="http://ddrccw.github.com">ddrccw</a>修改。
</span>
</div>

	</div>
	
</body>
</html>
